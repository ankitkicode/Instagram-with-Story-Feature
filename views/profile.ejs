<% include ./partials/header.ejs %>
  <div class="w-full min-h-screen bg-zinc-900 text-white py-5">
      <div class="nav flex justify-between items-center px-4">
        <h3 class="text-lg"><%= user.username %></h3>
        <div class="icons flex gap-5">
          <a href="/upload"><i class="text-[1.4rem] ri-add-box-line"></i></a>
         <a href="/menu-setup"> <i class="text-[1.4rem] ri-menu-line"></i></a>
        </div>
      </div>
      <div class="flex justify-between items-center pl-6 pr-[12vw] mt-8">
        <div class="w-[19vw] h-[19vw] bg-sky-700 rounded-full overflow-hidden">
          <img class="object-cover h-full w-full object-center" src="/images/uploads/<%= user.profilePic || 'default.jpeg' %>" alt="" />        </div>
        <div class="stats flex gap-5 items-center justify-between">
          <div class="flex flex-col items-center justify-center">
            <h3><%= user.posts.length %></h3>
            <h4>Posts</h4>
          </div>
         <a href="/followers">
          <div class="flex flex-col items-center justify-center">
            <h3><%= user.followers.length %></h3>
            <h4>followers</h4>
          </div>
         </a>
          <div class="flex flex-col items-center justify-center">
            <h3><%= user.following.length %></h3>
            <h4>following</h4>
          </div>
        </div>
      </div>
      <div class="dets px-6 mt-5">
        <h3 class="text-lg mb-1"><%= user.name %></h3>
        <p class="text-xs tracking-tight w-[40.8%] opacity-50">
          <%=user.bio ?? 'Set bio...'%>
        </p>
      </div>
      <div class="px-6 mt-5">
        <a class="px-3 py-2 bg-zinc-800 text-xs rounded-md" href="/edit">Edit Profile</a>
      </div>
      <% if (user.posts.length > 0) { %>
        <div class="posts w-full flex  gap-1 py-2 mt-5 flex-wrap">
          <% user.posts.reverse().forEach(function(post){ %>
            <!-- <script>console.log("Post object:", <%= JSON.stringify(post) %>);</script> -->
            <div class="post w-[32.5%] h-32 overflow-hidden">
              <!-- Render HTML for each post -->
             <img class="h-full w-full object-cover" src="../images/uploads/<%= post.image %>" alt="" />
              <!-- Add more post details as needed -->
            </div>
          <% }); %>
        </div>
      <% } else { %>
        <div class="w-full flex justify-between gap-1 py-2 mt-[20%] flex-wrap">
          <small class="text-center ml-[40%] opacity-50">No Post at</small>
        </div>
      <% } %>
      <!-- <div class="h-[80vh] top-12 right-0 absolute w-[50%] bg-zinc-400"></div> -->
  </div>
<% include ./partials/footer.ejs %>